@app.route('/api/v1/gateway/name/getdevicedetails/all')
@cross_origin()
def getdevicedataall():
    unique_device_names = set()
    devices_info = []
    try:
        apiurl = "http://localhost:59881/api/v2/device/all"
        response = requests.get(apiurl)
        deviceslist = response.json()['devices']
        for device in deviceslist:
            device_name = device['name']
            if device_name not in unique_device_names:
                unique_device_names.add(device_name)

                device_info = {
                    'id': device['id'],
                    'serviceName': device['serviceName'],
                    'profileName': device['profileName'],
                    'address': device['protocols']['modbus-tcp']['Address'],
                    'port': device['protocols']['modbus-tcp']['Port']
                }
                devices_info.append(device_info)
        return str(devices_info)
    except Exception as e:
        return str(e), 500
